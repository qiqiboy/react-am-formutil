import{List as e,Switch,Checkbox,Radio,PickerView,DatePicker,Range,Picker,ImagePicker,InputItem,TextareaItem,Slider,Modal as r}from"antd-mobile";import t from"prop-types";import a,{Children as o,cloneElement as c,Component as n}from"react";import{EasyField as i}from"react-formutil";export*from"react-formutil";var s=function(e,r){s=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,r){e.__proto__=r}||function(e,r){for(var t in r)if(r.hasOwnProperty(t))e[t]=r[t]};return s(e,r)};function l(e,r){s(e,r);function t(){this.constructor=e}e.prototype=r===null?Object.create(r):(t.prototype=r.prototype,new t)}var f=function(){f=Object.assign||function e(r){for(var t,a=1,o=arguments.length;a<o;a++){t=arguments[a];for(var c in t)if(Object.prototype.hasOwnProperty.call(t,c))r[c]=t[c]}return r};return f.apply(this,arguments)};function u(e,r){var t={};for(var a in e)if(Object.prototype.hasOwnProperty.call(e,a)&&r.indexOf(a)<0)t[a]=e[a];if(e!=null&&typeof Object.getOwnPropertySymbols==="function")for(var o=0,a=Object.getOwnPropertySymbols(e);o<a.length;o++)if(r.indexOf(a[o])<0)t[a[o]]=e[a[o]];return t}var p=e.Item;var v=1;var m=function(e){v=e};var d=Switch.name!=="Switch";function y(e){if(e){if(typeof e.type==="function"){var r=e.type;if(r.formutilType){return r.formutilType}if(d){return r}return r.displayName||r.name}else{return e.props.type||e.type}}}var h=d?Checkbox:"Checkbox";var b=d?Radio:"Radio";var k=d?PickerView:"PickerView";var _=d?DatePicker:"DatePicker";var O=d?Switch:"Switch";var g=d?Range:"Range";var P=d?Picker:"Picker";var w=d?ImagePicker:"ImagePicker";var j=d?InputItem:"InputItem";var I=d?TextareaItem:"TextareaItem";var E=d?Slider:"Slider";var x=d?Checkbox.CheckboxItem:"CheckboxItem";var N=d?Radio.RadioItem:"RadioItem";var T=d?Checkbox.AgreeItem:"AgreeItem";var $=function(e){l(n,e);function n(){return e!==null&&e.apply(this,arguments)||this}n.prototype.render=function(){var e=this.props;var t=e,n=t.children,s=t.className,l=t.label,m=t.errorLevel,d=m===void 0?v:m,$=u(t,["children","className","label","errorLevel"]);var C=o.only(n);var R=y(C);switch(R){case h:case b:case O:case x:case N:case T:$.__TYPE__="checked";break;case"checked":case"array":case"object":case"number":case"empty":$.__TYPE__=R;break;default:$.__TYPE__="empty";break}return a.createElement(i,f({},$,{passUtil:"$fieldutil",children:function(t){var o,n;var i=e.valuePropName,v=i===void 0?"value":i,m=e.changePropName,y=m===void 0?"onChange":m,$=e.focusPropName,S=$===void 0?"onFocus":$,A=e.blurPropName,L=A===void 0?"onBlur":A;var Y=t.$fieldutil,B=y,F=t[B],q=S,D=t[q],U=L,V=t[U],z=v,G=t[z],H=u(t,["$fieldutil",typeof B==="symbol"?B:B+"",typeof q==="symbol"?q:q+"",typeof U==="symbol"?U:U+"",typeof z==="symbol"?z:z+""]);var J=Y.$invalid,K=Y.$dirty,M=Y.$touched,Q=Y.$getFirstError,W=Y.$focused;var X;switch(R){case h:case b:case O:case x:case N:case T:case"checked":var Z=e.checked,ee=Z===void 0?true:Z,re=e.unchecked,te=re===void 0?false:re;X={checked:G===ee,onChange:function(e){var r=e&&e.target?e.target.checked:e;F(r?ee:te,e)}};break;case w:X={onChange:F,files:G};break;default:X=(o={},o[y]=F,o[v]=G,o);break}Object.assign(X,(n={},n[S]=D,n[L]=V,n));var ae;switch(d){case 0:ae=J&&K&&M;break;case 1:ae=J&&K;break;case 2:ae=J;break;default:ae=false;break}var oe={invalid:J,valid:!J,dirty:K,pristine:!K,touched:M,untouched:!M,focused:W};H.className=Object.keys(oe).filter(function(e){return oe[e]}).map(function(e){return"antm-formutil-"+e}).concat(s).filter(Boolean).join(" ");var ce=ae?{error:true}:{};switch(R){case j:case I:ce.onErrorClick=function(){r.alert("Error info",Q())};case x:case N:case T:case g:case E:case k:return c(C,f({},H,ce,X,{title:l,children:l}));case _:case P:return c(C,f({},X,{children:a.createElement(p,f({},H,ce),l)}));default:var ne=c(C,X);return l?a.createElement(p,f({},H,ce,{extra:ne}),l):a.createElement(p,f({},H,ce),ne)}}}))};n.propTypes=f({},p.propTypes,{label:t.any,errorLevel:t.oneOf([0,1,2,"off"]),children:t.element.isRequired});return n}(n);export{$ as FormItem,m as setErrorLevel};

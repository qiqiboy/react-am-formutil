import{__extends as e,__rest as r,__assign as a}from"tslib";import{List as t,Switch,Checkbox,Radio,PickerView,DatePicker,Range,Picker,ImagePicker,InputItem,TextareaItem,Slider,Modal as c}from"antd-mobile";import o from"prop-types";import i,{Children as n,cloneElement as s,Component as l}from"react";import{EasyField as u}from"react-formutil";export*from"react-formutil";var m=t.Item;var f=1;var v=function(e){f=e};var p=Switch.name!=="Switch";function d(e){if(e){if(typeof e.type==="function"){var r=e.type;if(r.formutilType){return r.formutilType}if(p){return r}return r.displayName||r.name}else{return e.props.type||e.type}}}var h=p?Checkbox:"Checkbox";var y=p?Radio:"Radio";var b=p?PickerView:"PickerView";var k=p?DatePicker:"DatePicker";var g=p?Switch:"Switch";var _=p?Range:"Range";var I=p?Picker:"Picker";var P=p?ImagePicker:"ImagePicker";var E=p?InputItem:"InputItem";var N=p?TextareaItem:"TextareaItem";var T=p?Slider:"Slider";var $=p?Checkbox.CheckboxItem:"CheckboxItem";var w=p?Radio.RadioItem:"RadioItem";var x=p?Checkbox.AgreeItem:"AgreeItem";var C=function(t){e(l,t);function l(){return t!==null&&t.apply(this,arguments)||this}l.prototype.render=function(){var e=this.props;var t=e,o=t.children,l=t.className,v=t.label,p=t.errorLevel,C=p===void 0?f:p,R=r(t,["children","className","label","errorLevel"]);var j=n.only(o);var L=d(j);switch(L){case h:case y:case g:case $:case w:case x:R.__TYPE__="checked";break;case"checked":case"array":case"object":case"number":case"empty":R.__TYPE__=L;break;default:R.__TYPE__="empty";break}return i.createElement(u,a({},R,{passUtil:"$fieldutil",children:function(t){var o,n;var u=e.valuePropName,f=u===void 0?"value":u,p=e.changePropName,d=p===void 0?"onChange":p,R=e.focusPropName,O=R===void 0?"onFocus":R,S=e.blurPropName,Y=S===void 0?"onBlur":S;var A=t.$fieldutil,B=d,F=t[B],q=O,D=t[q],U=Y,V=t[U],z=f,G=t[z],H=r(t,["$fieldutil",typeof B==="symbol"?B:B+"",typeof q==="symbol"?q:q+"",typeof U==="symbol"?U:U+"",typeof z==="symbol"?z:z+""]);var J=A.$invalid,K=A.$dirty,M=A.$touched,Q=A.$getFirstError,W=A.$focused;var X;switch(L){case h:case y:case g:case $:case w:case x:case"checked":var Z=e.checked,ee=Z===void 0?true:Z,re=e.unchecked,ae=re===void 0?false:re;X={checked:G===ee,onChange:function(e){var r=e&&e.target?e.target.checked:e;F(r?ee:ae,e)}};break;case P:X={onChange:F,files:G};break;default:X=(o={},o[d]=F,o[f]=G,o);break}Object.assign(X,(n={},n[O]=D,n[Y]=V,n));var te;switch(C){case 0:te=J&&K&&M;break;case 1:te=J&&K;break;case 2:te=J;break;default:te=false;break}var ce={invalid:J,valid:!J,dirty:K,pristine:!K,touched:M,untouched:!M,focused:W};H.className=Object.keys(ce).filter(function(e){return ce[e]}).map(function(e){return"antm-formutil-"+e}).concat(l).filter(Boolean).join(" ");var oe=te?{error:true}:{};switch(L){case E:case N:oe.onErrorClick=function(){c.alert("Error info",Q())};case $:case w:case x:case _:case T:case b:return s(j,a({},H,oe,X,{title:v,children:v}));case k:case I:return s(j,a({},X,{children:i.createElement(m,a({},H,oe),v)}));default:var ie=s(j,X);return v?i.createElement(m,a({},H,oe,{extra:ie}),v):i.createElement(m,a({},H,oe),ie)}}}))};l.propTypes=a({},m.propTypes,{label:o.any,errorLevel:o.oneOf([0,1,2,"off"]),children:o.element.isRequired});return l}(l);export{C as FormItem,v as setErrorLevel};

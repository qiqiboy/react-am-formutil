import{__extends as e,__assign as r,__rest as a}from"tslib";import{Checkbox,Radio,List,Switch,PickerView,DatePicker,Range,Picker,ImagePicker,InputItem,TextareaItem,Slider,Modal}from"antd-mobile";import t from"prop-types";import n,{Component as o,Children as c,cloneElement as i}from"react";import{EasyField as u}from"react-formutil";export*from"react-formutil";var l=Checkbox.CheckboxItem;var s=function(a){e(o,a);function o(){return a!==null&&a.apply(this,arguments)||this}o.prototype.render=function(){var e=this;var a=this.props,t=a.onChange,o=a.value,c=a.onFocus,i=a.onBlur,u=a.data;var s=function(e,r){var a=r.target.checked;t(a?o.concat(e):o.filter(function(r){return r!==e}))};return u.map(function(a){return n.createElement(l,r({key:a.value},a,{checked:o.indexOf(a.value)>-1,children:a.title,onChange:s.bind(e,a.value),onFocus:c,onBlur:i}))})};o.propTypes={onChange:t.func,onFocus:t.func,onBlur:t.func,value:t.array};o.defaultProps={value:[]};return o}(o);var v=Radio.RadioItem;var f=function(a){e(o,a);function o(){return a!==null&&a.apply(this,arguments)||this}o.prototype.render=function(){var e=this;var a=this.props,t=a.onChange,o=a.value,c=a.onFocus,i=a.onBlur,u=a.data;var l=function(e){t(e)};return u.map(function(a){return n.createElement(v,r({key:a.value},a,{checked:o===a.value,children:a.title,onChange:l.bind(e,a.value),onFocus:c,onBlur:i}))})};o.propTypes={onChange:t.func,onFocus:t.func,onBlur:t.func,value:t.any};return o}(o);var p=List.Item;var d=1;var m=function(e){d=e};var h=Switch.name!=="Switch";function y(e){if(e){if(typeof e.type==="function"){var r=e.type;if(r.formutilType){return r.formutilType}if(h){return r}return r.displayName||r.name}else{return e.props.type||e.type}}}var k=h?Checkbox:"Checkbox";var b=h?Radio:"Radio";var g=h?PickerView:"PickerView";var C=h?DatePicker:"DatePicker";var I=h?Switch:"Switch";var E=h?Range:"Range";var P=h?Picker:"Picker";var _=h?ImagePicker:"ImagePicker";var x=h?InputItem:"InputItem";var T=h?TextareaItem:"TextareaItem";var B=h?Slider:"Slider";var F=h?Checkbox.CheckboxItem:"CheckboxItem";var N=h?Radio.RadioItem:"RadioItem";var $=h?Checkbox.AgreeItem:"AgreeItem";var w=h?s:"CheckboxGroup";var R=h?f:"RadioGroup";var j=function(o){e(l,o);function l(){return o!==null&&o.apply(this,arguments)||this}l.prototype.render=function(){var e=this.props;var t=e,o=t.children,l=t.className,s=t.label,v=t.errorLevel,f=v===void 0?d:v,m=a(t,["children","className","label","errorLevel"]);var h=c.only(o);var j=y(h);switch(j){case k:case b:case I:case F:case N:case $:m.__TYPE__="checked";break;case"checked":case"array":case"object":case"number":case"empty":m.__TYPE__=j;break;default:m.__TYPE__="empty";break}return n.createElement(u,r({},m,{passUtil:"$fieldutil",children:function(t){var o,c;var u=e.valuePropName,v=u===void 0?"value":u,d=e.changePropName,m=d===void 0?"onChange":d,y=e.focusPropName,O=y===void 0?"onFocus":y,L=e.blurPropName,S=L===void 0?"onBlur":L;var Y=t.$fieldutil,A=m,G=t[A],q=O,D=t[q],U=S,V=t[U],z=v,H=t[z],J=a(t,["$fieldutil",typeof A==="symbol"?A:A+"",typeof q==="symbol"?q:q+"",typeof U==="symbol"?U:U+"",typeof z==="symbol"?z:z+""]);var K=Y.$invalid,M=Y.$dirty,Q=Y.$touched,W=Y.$getFirstError,X=Y.$focused;var Z;switch(j){case k:case b:case I:case F:case N:case $:case"checked":var ee=e.checked,re=ee===void 0?true:ee,ae=e.unchecked,te=ae===void 0?false:ae;Z={checked:H===re,onChange:function(e){var r=e&&e.target?e.target.checked:e;G(r?re:te,e)}};break;case _:Z={onChange:G,files:H};break;default:Z=(o={},o[m]=G,o[v]=H,o);break}Object.assign(Z,(c={},c[O]=D,c[S]=V,c));var ne;switch(f){case 0:ne=K&&M&&Q;break;case 1:ne=K&&M;break;case 2:ne=K;break;default:ne=false;break}var oe={invalid:K,valid:!K,dirty:M,pristine:!M,touched:Q,untouched:!Q,focused:X};J.className=Object.keys(oe).filter(function(e){return oe[e]}).map(function(e){return"antm-formutil-"+e}).concat(l).filter(Boolean).join(" ");var ce=ne?{error:true}:{};switch(j){case x:case T:ce.onErrorClick=function(){Modal.alert("Error info",W())};case F:case N:case $:case E:case B:case g:return i(h,r({},J,ce,Z,{title:s,children:s}));case C:case P:return i(h,r({},Z,{children:n.createElement(p,r({},J,ce),s)}));case w:case R:return i(h,Z);default:var ie=i(h,Z);return s?n.createElement(p,r({},J,ce,{extra:ie}),s):n.createElement(p,r({},J,ce),ie)}}}))};l.propTypes=r({},p.propTypes,{label:t.any,errorLevel:t.oneOf([0,1,2,"off"]),children:t.element.isRequired});return l}(o);export{s as CheckboxGroup,j as FormItem,f as RadioGroup,m as setErrorLevel};

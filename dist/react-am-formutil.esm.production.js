import{__extends as e,__rest as r,__assign as a}from"tslib";import{Checkbox,Radio,List,Switch,PickerView,DatePicker,Range,Picker,ImagePicker,InputItem,TextareaItem,Slider,Modal}from"antd-mobile";import t,{Component as n,Children as o,cloneElement as c}from"react";import{EasyField as i}from"react-formutil";export*from"react-formutil";var u=Checkbox.CheckboxItem;var l=function(n){e(o,n);function o(){return n!==null&&n.apply(this,arguments)||this}o.prototype.render=function(){var e=this;var n=this.props,o=n.onChange,c=n.value,i=n.onFocus,l=n.onBlur,s=n.data,v=r(n,["onChange","value","onFocus","onBlur","data"]);var d=function(e,r){var a=r.target.checked;o(a?c.concat(e):c.filter(function(r){return r!==e}))};return s.map(function(r){return t.createElement(u,a({key:r.value},v,r,{checked:c.indexOf(r.value)>-1,children:r.title,onChange:d.bind(e,r.value),onFocus:i,onBlur:l}))})};o.propTypes=undefined;o.defaultProps={value:[]};return o}(n);var s=Radio.RadioItem;var v=function(n){e(o,n);function o(){return n!==null&&n.apply(this,arguments)||this}o.prototype.render=function(){var e=this;var n=this.props,o=n.onChange,c=n.value,i=n.onFocus,u=n.onBlur,l=n.data,v=r(n,["onChange","value","onFocus","onBlur","data"]);var d=function(e){o(e)};return l.map(function(r){return t.createElement(s,a({key:r.value},v,r,{checked:c===r.value,children:r.title,onChange:d.bind(e,r.value),onFocus:i,onBlur:u}))})};o.propTypes=undefined;return o}(n);var d=List.Item;var f=1;var p=function(e){f=e};var h=Switch.name!=="Switch";function m(e){if(e){if(typeof e.type==="function"){var r=e.type;if(r.formutilType){return r.formutilType}if(h){return r}return r.displayName||r.name}else{return e.props.type||e.type}}}var y=h?Checkbox:"Checkbox";var k=h?Radio:"Radio";var b=h?PickerView:"PickerView";var g=h?DatePicker:"DatePicker";var C=h?Switch:"Switch";var I=h?Range:"Range";var P=h?Picker:"Picker";var _=h?ImagePicker:"ImagePicker";var E=h?InputItem:"InputItem";var x=h?TextareaItem:"TextareaItem";var T=h?Slider:"Slider";var B=h?Checkbox.CheckboxItem:"CheckboxItem";var F=h?Radio.RadioItem:"RadioItem";var N=h?Checkbox.AgreeItem:"AgreeItem";var $=h?l:"CheckboxGroup";var w=h?v:"RadioGroup";var R=function(n){e(u,n);function u(){return n!==null&&n.apply(this,arguments)||this}u.prototype.render=function(){var e=this.props;var n=e,u=n.children,l=n.className,s=n.label,v=n.errorLevel,p=v===void 0?f:v,h=r(n,["children","className","label","errorLevel"]);var R=o.only(u);var j=m(R);switch(j){case y:case k:case C:case B:case F:case N:h.__TYPE__="checked";break;case"checked":case"array":case"object":case"number":case"empty":h.__TYPE__=j;break;default:h.__TYPE__="empty";break}return t.createElement(i,a({},h,{passUtil:"$fieldutil",children:function(n){var o,i;var u=e.valuePropName,v=u===void 0?"value":u,f=e.changePropName,h=f===void 0?"onChange":f,m=e.focusPropName,O=m===void 0?"onFocus":m,S=e.blurPropName,Y=S===void 0?"onBlur":S;var A=n.$fieldutil,G=h,L=n[G],D=O,U=n[D],V=Y,q=n[V],z=v,H=n[z],J=r(n,["$fieldutil",typeof G==="symbol"?G:G+"",typeof D==="symbol"?D:D+"",typeof V==="symbol"?V:V+"",typeof z==="symbol"?z:z+""]);var K=A.$invalid,M=A.$dirty,Q=A.$touched,W=A.$getFirstError,X=A.$focused;var Z;switch(j){case y:case k:case C:case B:case F:case N:case"checked":var ee=e.checked,re=ee===void 0?true:ee,ae=e.unchecked,te=ae===void 0?false:ae;Z={checked:H===re,onChange:function(e){var r=e&&e.target?e.target.checked:e;L(r?re:te,e)}};break;case _:Z={onChange:L,files:H};break;default:Z=(o={},o[h]=L,o[v]=H,o);break}Object.assign(Z,(i={},i[O]=U,i[Y]=q,i));var ne;switch(p){case 0:ne=K&&M&&Q;break;case 1:ne=K&&M;break;case 2:ne=K;break;default:ne=false;break}var oe={invalid:K,valid:!K,dirty:M,pristine:!M,touched:Q,untouched:!Q,focused:X};J.className=Object.keys(oe).filter(function(e){return oe[e]}).map(function(e){return"am-formutil-"+e}).concat(l).filter(Boolean).join(" ");var ce=ne?{error:true}:{};switch(j){case E:case x:ce.onErrorClick=function(){Modal.alert("Error info",W())};case B:case F:case N:case I:case T:case b:return c(R,a({},J,ce,Z,{title:s,children:s}));case g:case P:return c(R,a({},Z,{children:t.createElement(d,a({},J,ce),s)}));case $:case w:return c(R,a({},J,ce,Z));default:var ie=c(R,Z);return t.createElement(d,a({},J,ce,s?{extra:ie,children:s}:{children:ie}))}}}))};u.propTypes=undefined;return u}(n);export{l as CheckboxGroup,R as FormItem,v as RadioGroup,p as setErrorLevel};

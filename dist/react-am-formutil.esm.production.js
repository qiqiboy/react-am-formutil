import{__extends as e,__rest as r,__assign as a}from"tslib";import{Checkbox,Radio,List,Switch,PickerView,DatePicker,Range,Picker,ImagePicker,InputItem,TextareaItem,Slider,Modal}from"antd-mobile";import t from"prop-types";import n,{Component as o,Children as c,cloneElement as i}from"react";import{EasyField as u}from"react-formutil";export*from"react-formutil";var l=Checkbox.CheckboxItem;var s=function(o){e(c,o);function c(){return o!==null&&o.apply(this,arguments)||this}c.prototype.render=function(){var e=this;var t=this.props,o=t.onChange,c=t.value,i=t.onFocus,u=t.onBlur,s=t.data,v=r(t,["onChange","value","onFocus","onBlur","data"]);var f=function(e,r){var a=r.target.checked;o(a?c.concat(e):c.filter(function(r){return r!==e}))};return s.map(function(r){return n.createElement(l,a({key:r.value},v,r,{checked:c.indexOf(r.value)>-1,children:r.title,onChange:f.bind(e,r.value),onFocus:i,onBlur:u}))})};c.propTypes={onChange:t.func,onFocus:t.func,onBlur:t.func,value:t.array};c.defaultProps={value:[]};return c}(o);var v=Radio.RadioItem;var f=function(o){e(c,o);function c(){return o!==null&&o.apply(this,arguments)||this}c.prototype.render=function(){var e=this;var t=this.props,o=t.onChange,c=t.value,i=t.onFocus,u=t.onBlur,l=t.data,s=r(t,["onChange","value","onFocus","onBlur","data"]);var f=function(e){o(e)};return l.map(function(r){return n.createElement(v,a({key:r.value},s,r,{checked:c===r.value,children:r.title,onChange:f.bind(e,r.value),onFocus:i,onBlur:u}))})};c.propTypes={onChange:t.func,onFocus:t.func,onBlur:t.func,value:t.any};return c}(o);var p=List.Item;var d=1;var h=function(e){d=e};var m=Switch.name!=="Switch";function y(e){if(e){if(typeof e.type==="function"){var r=e.type;if(r.formutilType){return r.formutilType}if(m){return r}return r.displayName||r.name}else{return e.props.type||e.type}}}var k=m?Checkbox:"Checkbox";var b=m?Radio:"Radio";var g=m?PickerView:"PickerView";var C=m?DatePicker:"DatePicker";var I=m?Switch:"Switch";var P=m?Range:"Range";var _=m?Picker:"Picker";var E=m?ImagePicker:"ImagePicker";var x=m?InputItem:"InputItem";var B=m?TextareaItem:"TextareaItem";var F=m?Slider:"Slider";var T=m?Checkbox.CheckboxItem:"CheckboxItem";var N=m?Radio.RadioItem:"RadioItem";var $=m?Checkbox.AgreeItem:"AgreeItem";var w=m?s:"CheckboxGroup";var R=m?f:"RadioGroup";var j=function(o){e(l,o);function l(){return o!==null&&o.apply(this,arguments)||this}l.prototype.render=function(){var e=this.props;var t=e,o=t.children,l=t.className,s=t.label,v=t.errorLevel,f=v===void 0?d:v,h=r(t,["children","className","label","errorLevel"]);var m=c.only(o);var j=y(m);switch(j){case k:case b:case I:case T:case N:case $:h.__TYPE__="checked";break;case"checked":case"array":case"object":case"number":case"empty":h.__TYPE__=j;break;default:h.__TYPE__="empty";break}return n.createElement(u,a({},h,{passUtil:"$fieldutil",children:function(t){var o,c;var u=e.valuePropName,v=u===void 0?"value":u,d=e.changePropName,h=d===void 0?"onChange":d,y=e.focusPropName,O=y===void 0?"onFocus":y,L=e.blurPropName,S=L===void 0?"onBlur":L;var Y=t.$fieldutil,A=h,G=t[A],q=O,D=t[q],U=S,V=t[U],z=v,H=t[z],J=r(t,["$fieldutil",typeof A==="symbol"?A:A+"",typeof q==="symbol"?q:q+"",typeof U==="symbol"?U:U+"",typeof z==="symbol"?z:z+""]);var K=Y.$invalid,M=Y.$dirty,Q=Y.$touched,W=Y.$getFirstError,X=Y.$focused;var Z;switch(j){case k:case b:case I:case T:case N:case $:case"checked":var ee=e.checked,re=ee===void 0?true:ee,ae=e.unchecked,te=ae===void 0?false:ae;Z={checked:H===re,onChange:function(e){var r=e&&e.target?e.target.checked:e;G(r?re:te,e)}};break;case E:Z={onChange:G,files:H};break;default:Z=(o={},o[h]=G,o[v]=H,o);break}Object.assign(Z,(c={},c[O]=D,c[S]=V,c));var ne;switch(f){case 0:ne=K&&M&&Q;break;case 1:ne=K&&M;break;case 2:ne=K;break;default:ne=false;break}var oe={invalid:K,valid:!K,dirty:M,pristine:!M,touched:Q,untouched:!Q,focused:X};J.className=Object.keys(oe).filter(function(e){return oe[e]}).map(function(e){return"am-formutil-"+e}).concat(l).filter(Boolean).join(" ");var ce=ne?{error:true}:{};switch(j){case x:case B:ce.onErrorClick=function(){Modal.alert("Error info",W())};case T:case N:case $:case P:case F:case g:return i(m,a({},J,ce,Z,{title:s,children:s}));case C:case _:return i(m,a({},Z,{children:n.createElement(p,a({},J,ce),s)}));case w:case R:return i(m,a({},J,ce,Z));default:var ie=i(m,Z);return n.createElement(p,a({},J,ce,s?{extra:ie,children:s}:{children:ie}))}}}))};l.propTypes=a({},p.propTypes,{label:t.any,errorLevel:t.oneOf([0,1,2,"off"]),children:t.element.isRequired});return l}(o);export{s as CheckboxGroup,j as FormItem,f as RadioGroup,h as setErrorLevel};

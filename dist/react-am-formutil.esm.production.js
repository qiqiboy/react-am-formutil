import{__extends as e,__rest as r,__assign as a}from"tslib";import{Checkbox,Radio,List,Switch,PickerView,DatePickerView,DatePicker,Range,Picker,ImagePicker,InputItem,TextareaItem,Slider,Modal}from"antd-mobile";import t,{Component as o,Children as n,cloneElement as c}from"react";import{EasyField as i}from"react-formutil";export*from"react-formutil";var u=Checkbox.CheckboxItem;var l=function(o){e(CheckboxGroup,o);function CheckboxGroup(){return o!==null&&o.apply(this,arguments)||this}CheckboxGroup.prototype.render=function(){var e=this;var o=this.props,n=o.onChange,c=o.value,i=o.onFocus,l=o.onBlur,s=o.data,p=r(o,["onChange","value","onFocus","onBlur","data"]);var v=function(e,r){var a=r.target.checked;n(a?c.concat(e):c.filter(function(r){return r!==e}))};return s.map(function(r){return t.createElement(u,a({key:r.value},p,r,{checked:c.indexOf(r.value)>-1,children:r.title,onChange:v.bind(e,r.value),onFocus:i,onBlur:l}))})};CheckboxGroup.propTypes=undefined;CheckboxGroup.defaultProps={value:[]};return CheckboxGroup}(o);var s=Radio.RadioItem;var p=function(o){e(RadioGroup,o);function RadioGroup(){return o!==null&&o.apply(this,arguments)||this}RadioGroup.prototype.render=function(){var e=this;var o=this.props,n=o.onChange,c=o.value,i=o.onFocus,u=o.onBlur,l=o.data,p=r(o,["onChange","value","onFocus","onBlur","data"]);var v=function(e){n(e)};return l.map(function(r){return t.createElement(s,a({key:r.value},p,r,{checked:c===r.value,children:r.title,onChange:v.bind(e,r.value),onFocus:i,onBlur:u}))})};RadioGroup.propTypes=undefined;return RadioGroup}(o);var v=List.Item;var d=1;var m=function(e){d=e};var f=Switch.name!=="Switch";function getComponentType(e){if(e){if(typeof e.type==="function"){var r=e.type;if(r.formutilType){return r.formutilType}if(f){return r}return r.displayName||r.name}else{return e.props.type||e.type}}}var h=f?Checkbox:"Checkbox";var k=f?Radio:"Radio";var b=f?PickerView:"PickerView";var y=f?DatePickerView:"DatePickerView";var C=f?DatePicker:"DatePicker";var g=f?Switch:"Switch";var I=f?Range:"Range";var x=f?Picker:"Picker";var F=f?ImagePicker:"ImagePicker";var G=f?InputItem:"InputItem";var P=f?TextareaItem:"TextareaItem";var _=f?Slider:"Slider";var E=f?Checkbox.CheckboxItem:"CheckboxItem";var R=f?Radio.RadioItem:"RadioItem";var T=f?Checkbox.AgreeItem:"AgreeItem";var w=f?l:"CheckboxGroup";var B=f?p:"RadioGroup";var N=function(o){e(FormItem,o);function FormItem(){return o!==null&&o.apply(this,arguments)||this}FormItem.prototype.render=function(){var e=this.props;var o=e,u=o.children,l=o.className,s=o.label,p=o.errorLevel,m=p===void 0?d:p,f=r(o,["children","className","label","errorLevel"]);var N=n.only(u);var $=getComponentType(N);switch($){case h:case k:case g:case E:case R:case T:f.__TYPE__="checked";break;case"checked":case"array":case"object":case"number":case"empty":f.__TYPE__=$;break;default:f.__TYPE__="empty";break}return t.createElement(i,a({},f,{passUtil:"$fieldutil",children:function(o){var n,i;var u=e.valuePropName,p=u===void 0?"value":u,d=e.changePropName,f=d===void 0?"onChange":d,j=e.focusPropName,O=j===void 0?"onFocus":j,S=e.blurPropName,Y=S===void 0?"onBlur":S;var A=o.$fieldutil,D=f,L=o[D],V=O,U=o[V],q=Y,z=o[q],H=p,J=o[H],K=r(o,["$fieldutil",typeof D==="symbol"?D:D+"",typeof V==="symbol"?V:V+"",typeof q==="symbol"?q:q+"",typeof H==="symbol"?H:H+""]);var M=A.$invalid,Q=A.$dirty,W=A.$touched,X=A.$getFirstError,Z=A.$focused;var ee;switch($){case h:case k:case g:case E:case R:case T:case"checked":var re=e.checked,ae=re===void 0?true:re,te=e.unchecked,oe=te===void 0?false:te;ee={checked:J===ae,onChange:function(e){var r=e&&e.target?e.target.checked:e;L(r?ae:oe,e)}};break;case F:ee={onChange:L,files:J};break;default:ee=(n={},n[f]=L,n[p]=J,n);break}Object.assign(ee,(i={},i[O]=U,i[Y]=z,i));var ne;switch(m){case 0:ne=M&&Q&&W;break;case 1:ne=M&&Q;break;case 2:ne=M;break;default:ne=false;break}var ce={invalid:M,valid:!M,dirty:Q,pristine:!Q,touched:W,untouched:!W,focused:Z};K.className=Object.keys(ce).filter(function(e){return ce[e]}).map(function(e){return"am-formutil-"+e}).concat(l).filter(Boolean).join(" ");var ie=ne?{error:true}:{};switch($){case G:case P:ie.onErrorClick=function(){Modal.alert("Error info",X())};case E:case R:case T:case I:case _:case b:case y:return c(N,a({},K,ie,ee,s?{title:s,children:s}:{}));case C:case x:return c(N,a({},ee,{children:t.createElement(v,a({},K,ie),s)}));case w:case B:return c(N,a({},K,ie,ee));default:var ue=c(N,ee);return t.createElement(v,a({},K,ie,s?{extra:ue,children:s}:{children:ue}))}}}))};FormItem.propTypes=undefined;return FormItem}(o);export{l as CheckboxGroup,N as FormItem,p as RadioGroup,m as setErrorLevel};

!function(e,t){"object"===typeof exports&&"undefined"!==typeof module?t(exports,require("antd-mobile"),require("react"),require("react-formutil")):"function"===typeof define&&define.amd?define(["exports","antd-mobile","react","react-formutil"],t):t((e=e||self).ReactAmFormutil={},e.AntdMobile,e.React,e.ReactFormutil)}(this,function(e,t,r,n){"use strict";var o="default"in r?r.default:r,a=function(e,t){return(a=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])})(e,t)};function c(e,t){function r(){this.constructor=e}a(e,t),e.prototype=null===t?Object.create(t):(r.prototype=t.prototype,new r)}var i=function(){return(i=Object.assign||function(e){for(var t,r=1,n=arguments.length;r<n;r++)for(var o in t=arguments[r])Object.prototype.hasOwnProperty.call(t,o)&&(e[o]=t[o]);return e}).apply(this,arguments)};function u(e,t){var r={};for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&t.indexOf(n)<0&&(r[n]=e[n]);if(null!=e&&"function"===typeof Object.getOwnPropertySymbols){var o=0;for(n=Object.getOwnPropertySymbols(e);o<n.length;o++)t.indexOf(n[o])<0&&(r[n[o]]=e[n[o]])}return r}var l=t.Checkbox.CheckboxItem,s=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.render=function(){var e=this,t=this.props,r=t.onChange,n=t.value,a=t.onFocus,c=t.onBlur,s=t.data,p=u(t,["onChange","value","onFocus","onBlur","data"]),d=function(e,t){var o=t.target.checked;r(o?n.concat(e):n.filter(function(t){return t!==e}))};return s.map(function(t){return o.createElement(l,i({key:t.value},p,t,{checked:n.indexOf(t.value)>-1,children:t.title,onChange:d.bind(e,t.value),onFocus:a,onBlur:c}))})},t.propTypes=void 0,t.defaultProps={value:[]},t}(r.Component),p=t.Radio.RadioItem,d=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return c(t,e),t.prototype.render=function(){var e=this,t=this.props,r=t.onChange,n=t.value,a=t.onFocus,c=t.onBlur,l=t.data,s=u(t,["onChange","value","onFocus","onBlur","data"]),d=function(e){r(e)};return l.map(function(t){return o.createElement(p,i({key:t.value},s,t,{checked:n===t.value,children:t.title,onChange:d.bind(e,t.value),onFocus:a,onBlur:c}))})},t.propTypes=void 0,t}(r.Component),f=t.List.Item,h=1,m="Switch"!==t.Switch.name;var y=m?t.Checkbox:"Checkbox",v=m?t.Radio:"Radio",b=m?t.PickerView:"PickerView",k=m?t.DatePicker:"DatePicker",g=m?t.Switch:"Switch",C=m?t.Range:"Range",P=m?t.Picker:"Picker",_=m?t.ImagePicker:"ImagePicker",O=m?t.InputItem:"InputItem",x=m?t.TextareaItem:"TextareaItem",E=m?t.Slider:"Slider",I=m?t.Checkbox.CheckboxItem:"CheckboxItem",w=m?t.Radio.RadioItem:"RadioItem",j=m?t.Checkbox.AgreeItem:"AgreeItem",R=m?s:"CheckboxGroup",F=m?d:"RadioGroup",T=function(e){function a(){return null!==e&&e.apply(this,arguments)||this}return c(a,e),a.prototype.render=function(){var e=this.props,a=e,c=a.children,l=a.className,s=a.label,p=a.errorLevel,d=void 0===p?h:p,T=u(a,["children","className","label","errorLevel"]),B=r.Children.only(c),N=function(e){if(e){if("function"===typeof e.type){var t=e.type;return t.formutilType?t.formutilType:m?t:t.displayName||t.name}return e.props.type||e.type}}(B);switch(N){case y:case v:case g:case I:case w:case j:T.__TYPE__="checked";break;case"checked":case"array":case"object":case"number":case"empty":T.__TYPE__=N;break;default:T.__TYPE__="empty"}return o.createElement(n.EasyField,i({},T,{passUtil:"$fieldutil",children:function(n){var a,c,p,h,m=e.valuePropName,T=void 0===m?"value":m,S=e.changePropName,$=void 0===S?"onChange":S,A=e.focusPropName,G=void 0===A?"onFocus":A,L=e.blurPropName,q=void 0===L?"onBlur":L,M=n.$fieldutil,Y=$,D=n[Y],V=G,U=n[V],z=q,H=n[z],J=T,K=n[J],Q=u(n,["$fieldutil","symbol"===typeof Y?Y:Y+"","symbol"===typeof V?V:V+"","symbol"===typeof z?z:z+"","symbol"===typeof J?J:J+""]),W=M.$invalid,X=M.$dirty,Z=M.$touched,ee=M.$getFirstError,te=M.$focused;switch(N){case y:case v:case g:case I:case w:case j:case"checked":var re=e.checked,ne=void 0===re||re,oe=e.unchecked,ae=void 0!==oe&&oe;p={checked:K===ne,onChange:function(e){var t=e&&e.target?e.target.checked:e;D(t?ne:ae,e)}};break;case _:p={onChange:D,files:K};break;default:(a={})[$]=D,a[T]=K,p=a}switch(Object.assign(p,((c={})[G]=U,c[q]=H,c)),d){case 0:h=W&&X&&Z;break;case 1:h=W&&X;break;case 2:h=W;break;default:h=!1}var ce={invalid:W,valid:!W,dirty:X,pristine:!X,touched:Z,untouched:!Z,focused:te};Q.className=Object.keys(ce).filter(function(e){return ce[e]}).map(function(e){return"am-formutil-"+e}).concat(l).filter(Boolean).join(" ");var ie=h?{error:!0}:{};switch(N){case O:case x:ie.onErrorClick=function(){t.Modal.alert("Error info",ee())};case I:case w:case j:case C:case E:case b:return r.cloneElement(B,i({},Q,ie,p,{title:s,children:s}));case k:case P:return r.cloneElement(B,i({},p,{children:o.createElement(f,i({},Q,ie),s)}));case R:case F:return r.cloneElement(B,i({},Q,ie,p));default:var ue=r.cloneElement(B,p);return o.createElement(f,i({},Q,ie,s?{extra:ue,children:s}:{children:ue}))}}}))},a.propTypes=void 0,a}(r.Component);Object.keys(n).forEach(function(t){Object.defineProperty(e,t,{enumerable:!0,get:function(){return n[t]}})}),e.CheckboxGroup=s,e.FormItem=T,e.RadioGroup=d,e.setErrorLevel=function(e){h=e},Object.defineProperty(e,"__esModule",{value:!0})});
